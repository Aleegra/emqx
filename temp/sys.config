%% coding: utf-8
%% RUNTIME_CONFIG=false
[{logger,[{format,<<36,109,101,115,115,97,103,101,10>>},{level,debug},{handle_otp_reports,true},{handle_sasl_reports,true}]},
{ekka,
  [{cluster_discovery,{manual,[]}},
   {proto_dist,inet_tcp},
   {cluster_autoheal,true},
   {cluster_autoclean,300000},
   {cluster_name,emqxcl}]},
 {mria,
  [{tlog_push_mode,async},
   {rlog_rpc_module,gen_rpc},
   {core_nodes,[]},
   {node_role,core},
   {db_backend,mnesia}]},
 {gen_rpc,
  [{socket_buffer,1048576},
   {socket_recbuf,1048576},
   {socket_sndbuf,1048576},
   {socket_keepalive_count,9},
   {socket_keepalive_interval,75},
   {socket_keepalive_idle,900},
   {call_receive_timeout,15000},
   {authentication_timeout,5000},
   {send_timeout,5000},
   {connect_timeout,5000},
   {tcp_server_port,5369},
   {port_discovery,stateless},
   {max_batch_size,256}]},
 {kernel,
  [{error_logger,silent},
   {inet_dist_listen_max,6369},
   {inet_dist_listen_min,6369},
   {logger,
    [{handler,default,undefined},
     {handler,console,logger_std_h,
      #{config =>
         #{burst_limit_enable => false,burst_limit_max_count => 10000,
           burst_limit_window_time => 1000,drop_mode_qlen => 3000,
           flush_qlen => 8000,overload_kill_enable => true,
           overload_kill_mem_size => 31457280,overload_kill_qlen => 20000,
           overload_kill_restart_after => 5000,sync_mode_qlen => 100,
           type => standard_io},
        filters =>
         [{drop_progress_reports,{fun logger_filters:progress/2,stop}}],
        formatter =>
         {emqx_logger_textfmt,
          #{chars_limit => unlimited,depth => 100,single_line => true,
            template =>
             [time," [",level,"] ",
              {clientid,
               [{peername,[clientid,"@",peername," "],[clientid," "]}],
               [{peername,[peername," "],[]}]},
              msg,"\n"],
            time_offset => []}},
        level => debug}},
     {handler,default,logger_disk_log_h,
      #{config =>
         #{burst_limit_enable => false,burst_limit_max_count => 10000,
           burst_limit_window_time => 1000,drop_mode_qlen => 3000,
           file => "log/emqx.log",flush_qlen => 8000,max_no_bytes => 10485760,
           max_no_files => 10,overload_kill_enable => true,
           overload_kill_mem_size => 31457280,overload_kill_qlen => 20000,
           overload_kill_restart_after => 5000,sync_mode_qlen => 100,
           type => wrap},
        filesync_repeat_interval => no_repeat,
        filters =>
         [{drop_progress_reports,{fun logger_filters:progress/2,stop}}],
        formatter =>
         {emqx_logger_textfmt,
          #{chars_limit => unlimited,depth => 100,single_line => true,
            template =>
             [time," [",level,"] ",
              {clientid,
               [{peername,[clientid,"@",peername," "],[clientid," "]}],
               [{peername,[peername," "],[]}]},
              msg,"\n"],
            time_offset => []}},
        level => warning}}]},
   {logger_level,debug}]},
 {emqx_machine,[{backtrace_depth,23},{global_gc_interval,900000}]},
 {emqx,
  [{data_dir,"data/"},
   {local_override_conf_file,"data/configs/local-override.conf"},
   {cluster_override_conf_file,"data/configs/cluster-override.conf"},
   {config_files,
    ["/home/thales/dev/emqx/emqx_mix/_build/dev/rel/emqx/etc/emqx.conf"]}]}].
